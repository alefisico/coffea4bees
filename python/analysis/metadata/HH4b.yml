config:
  regions: 
    - SR
    - inclusive
  JCM: 'analysis/weights/dataRunII/jetCombinatoricModel_SB_00-00-02.txt'
  threeTag: true
  apply_puWeight: true
  apply_prefire: true
  apply_trigWeight: true
  apply_btagSF: true
  addbtagVariations: true
  addjuncVariations: false
  #SvB   : 'pytorchModels/SvB_HCR_8_np753_seed0_lr0.01_epochs20_offset*_epoch20.pkl',
  #SvB_MA': 'pytorchModels/SvB_MA_HCR+attention_8_np1061_seed0_lr0.01_epochs20_offset*_epoch20.pkl',

datasets:
  data:
    'UL16_preVFP':
      lumi: 19.5e3
      trigger: 
        - QuadJet45_TripleBTagCSV_p087 
        - DoubleJet90_Double30_TripleBTagCSV_p087 
        - DoubleJetsC100_DoubleBTagCSV_p014_DoublePFJetsC100MaxDeta1p6
      picoAOD: 
        B: '/store/user/algomez/XX4b/20231115/data2016B/picoAOD.root'
        C: '/store/user/algomez/XX4b/20231115/data2016C/picoAOD.root'
        D: '/store/user/algomez/XX4b/20231115/data2016D/picoAOD.root'
        E: '/store/user/algomez/XX4b/20231115/data2016E/picoAOD.root'
    'UL16_postVFP':
      lumi: 16.5e3
      trigger: 
        - QuadJet45_TripleBTagCSV_p087 
        - DoubleJet90_Double30_TripleBTagCSV_p087 
        - DoubleJetsC100_DoubleBTagCSV_p014_DoublePFJetsC100MaxDeta1p6
      picoAOD: 
        F: '/store/user/algomez/XX4b/20231115/data2016F/picoAOD.root'
        G: '/store/user/algomez/XX4b/20231115/data2016G/picoAOD.root'
        H: '/store/user/algomez/XX4b/20231115/data2016H/picoAOD.root'
    'UL17':
      lumi: 36.7e3
      trigger:
        - PFHT300PT30_QuadPFJet_75_60_45_40_TriplePFBTagCSV_3p0
        - DoublePFJets100MaxDeta1p6_DoubleCaloBTagCSV_p33
      picoAOD: 
#        B: '/store/user/algomez/XX4b/20231115/data2017B/picoAOD.root' # Dont think we need/want this
        C: '/store/user/algomez/XX4b/20231115/data2017C/picoAOD.root'
        D: '/store/user/algomez/XX4b/20231115/data2017D/picoAOD.root'
        E: '/store/user/algomez/XX4b/20231115/data2017E/picoAOD.root'
        F: '/store/user/algomez/XX4b/20231115/data2017F/picoAOD.root'
    'UL18':
      lumi: 59.8e3
      trigger:
        - DoublePFJets116MaxDeta1p6_DoubleCaloBTagDeepCSV_p71
        - PFHT330PT30_QuadPFJet_75_60_45_40_TriplePFBTagDeepCSV_4p5
      picoAOD: 
        A: '/store/user/algomez/XX4b/20231115/data2018A/picoAOD.root'
        B: '/store/user/algomez/XX4b/20231115/data2018B/picoAOD.root'
        C: '/store/user/algomez/XX4b/20231115/data2018C/picoAOD.root'
        D: '/store/user/algomez/XX4b/20231115/data2018D/picoAOD.root'

  ggZH4b :
    xs: 0.1227*0.5824*0.1512 #0.0432 from GenXsecAnalyzer, does not include BR for H, does include BR(Z->hadrons) = 0.69911. 0.0432/0.69911 = 0.0618, almost exactly half the LHCxsWG value... NNLO = 2x NLO??
    'UL16_postVFP': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/ggZH4b2016_postVFP/picoAOD.root'
    'UL16_preVFP': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/ggZH4b2016_preVFP/picoAOD.root'
    'UL17': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/ggZH4b2017/picoAOD.root'
    'UL18': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/ggZH4b2018/picoAOD.root'

  HH4b:
    xs: 0.03105*0.5824**2 # (0.0457 2018, doesn't include BR, 0.009788 2016, does include BR...) https://twiki.cern.ch/twiki/bin/view/LHCPhysics/LHCHWGHH recommends 31.05fb*BR^2=10.53fb
    'UL16_preVFP': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/HH4b2016/picoAOD.root'
    'UL17': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/HH4b2017/picoAOD.root'
    'UL18': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/HH4b2018/picoAOD.root'

  ZH4b:
    xs: 0.7612*0.5824*0.1512 #0.5540 from GenXsecAnalyzer, does not include BR for H, does include BR(Z->hadrons) = 0.69911. 0.5540/0.69911 = 0.7924, 4% larger than the LHCxsWG value.
    'UL16_postVFP': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/ZH4b2016_postVFP/picoAOD.root'
    'UL16_preVFP': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/ZH4b2016_preVFP/picoAOD.root'
    'UL17': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/ZH4b2017/picoAOD.root'
    'UL18': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/ZH4b2018/picoAOD.root'

  ZZ4b:
    xs: 15.5   *0.1512*0.1512  #0.3688 from GenXsecAnalyzer gives 16.13 dividing by BR^2. mcEventSumw/mcEventCount * FxFx Jet Matching eff. = 542638/951791 * 0.647 = 0.3688696216. Jet matching not included in genWeight!
    'UL16_postVFP': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/ZZ4b2016_postVFP/picoAOD.root'
    'UL16_preVFP': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/ZZ4b2016_preVFP/picoAOD.root'
    'UL17': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/ZZ4b2017/picoAOD.root'
    'UL18': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/ZZ4b2018/picoAOD.root'

  TTToHadronic:
    xs: 377.9607353256 #313.9 from McM. NNLO tt xs = 831.76, W hadronic BR = 0.6741 => NNLO = 831.76*0.6741^2 = 377.9607353256
    'UL16_postVFP': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/TTToHadronic2016_postVFP/picoAOD.root'
    'UL16_preVFP': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/TTToHadronic2016_preVFP/picoAOD.root'
    'UL17': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/TTToHadronic2017/picoAOD.root'
    'UL18': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/TTToHadronic2018/picoAOD.root'

  TTToSemiLeptonic:
    xs: 365.7826460496 #300.9 from McM. NNLO = 831.76*2*(1-0.6741)*0.6747 = 365.7826460496
    'UL16_postVFP': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/TTToSemiLeptonic2016_postVFP/picoAOD.root'
    'UL16_preVFP': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/TTToSemiLeptonic2016_preVFP/picoAOD.root'
    'UL17': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/TTToSemiLeptonic2017/picoAOD.root'
    'UL18': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/TTToSemiLeptonic2018/picoAOD.root'

  TTTo2L2Nu:
    xs: 88.3419033256 #72.1 from McM. NNLO = 831.76*(1-0.6741)^2 = 88.3419033256
    'UL16_postVFP': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/TTTo2L2Nu2016_postVFP/picoAOD.root'
    'UL16_preVFP': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/TTTo2L2Nu2016_preVFP/picoAOD.root'
    'UL17': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/TTTo2L2Nu2017/picoAOD.root'
    'UL18': 
      nanoAOD: '/dataset/dataset/NANOAODSIM'
      picoAOD: '/store/user/algomez/XX4b/20231115/TTTo2L2Nu2018/picoAOD.root'

  mixeddata:
    'UL16_preVFP':
      picoAOD: '/store/user/jda102/condor/ZH4b/ULTrig/mixed2016_3bDvTMix4bDvT_v0/picoAOD_3bDvTMix4bDvT_4b_wJCM_v0_newSBDef.root'
    'UL17':
      picoAOD: '/store/user/jda102/condor/ZH4b/ULTrig/mixed2017_3bDvTMix4bDvT_v0/picoAOD_3bDvTMix4bDvT_4b_wJCM_v0_newSBDef.root'
    'UL18':
      picoAOD: '/store/user/jda102/condor/ZH4b/ULTrig/mixed2018_3bDvTMix4bDvT_v0/picoAOD_3bDvTMix4bDvT_4b_wJCM_v0_newSBDef.root'

## for MC we need to normalize the sample to the recommended cross section * BR times the target luminosity
### Higgs BRs https://twiki.cern.ch/twiki/bin/view/LHCPhysics/CERNYellowReportPageBR BR(h125->bb) = 0.5824 BR(h125->\tau\tau) = 0.06272 BR(Z->bb) = 0.1512, BR(Z->\tau\tau) = 0.03696
### ZH cross sections https://twiki.cern.ch/twiki/bin/view/LHCPhysics/CERNYellowReportPageAt13TeV#ZH_Process
### ZZ cross section 15.0 +0.7 -0.6 +/-0.2 (MCFM at NLO in QCD with additional contributions from LO gg -> ZZ diagrams) or 16.2 +0.6 -0.4 (calculated at NNLO in QCD via MATRIX) https://arxiv.org/pdf/1607.08834.pdf pg 10
### ZH->bb\tau\tau xs = (0.7612+0.1227)*(0.58*0.036+0.15*0.067) = 27/fb ~ 10x HH cross section
### HH->bb\tau\tau xs = 34*0.58*0.067*2 = 2.6/fb
### Higgs BR(mH=125.0) = 0.5824, BR(mH=125.09) = 0.5809: https://twiki.cern.ch/twiki/bin/view/LHCPhysics/CERNYellowReportPageBR
### Z BR = 0.1512+/-0.0005 from PDG
### store all process cross sections in pb. Can compute xs of sample with GenXsecAnalyzer. Example:
### https://twiki.cern.ch/twiki/bin/viewauth/CMS/HowToGenxsecAnalyzer
### cd genproductions/Utilities/calculatexsectionAndFilterEfficiency; ./calculatexsectionAndFilterEfficiency.sh -f ../../../ZZ_dataset.txt -c RunIIAutumn18MiniAOD-102X_upgrade2018_realistic_v15-v1 -d MINIAODSIM -n -1
### tt xs NNLO and measurement in dilep and semilep tt+jets, tt+bb: https://cds.cern.ch/record/2684606/files/TOP-18-002-paper-v19.pdf
